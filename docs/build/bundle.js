var PDF_OCR=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function d(){return a(" ")}function f(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}let g;function $(t){g=t}const b=[],x=[],j=[],y=[],w=Promise.resolve();let v=!1;function _(t){j.push(t)}let k=!1;const C=new Set;function E(){if(!k){k=!0;do{for(let t=0;t<b.length;t+=1){const e=b[t];$(e),A(e.$$)}for($(null),b.length=0;x.length;)x.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];C.has(e)||(C.add(e),e())}j.length=0}while(b.length);for(;y.length;)y.pop()();v=!1,k=!1,C.clear()}}function A(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const T=new Set;function N(t,e){t&&t.i&&(T.delete(t),t.i(e))}const R="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function O(t,n,s){const{fragment:c,on_mount:i,on_destroy:l,after_update:u}=t.$$;c&&c.m(n,s),_((()=>{const n=i.map(e).filter(r);l?l.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(_)}function F(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(t,e){-1===t.$$.dirty[0]&&(b.push(t),v||(v=!0,w.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function S(e,r,s,c,i,u,a=[-1]){const d=g;$(e);const f=r.props||{},p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:a,skip_bound:!1};let h=!1;if(p.ctx=s?s(e,f,((t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),h&&P(e,t)),n})):[],p.update(),h=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();r.intro&&N(e.$$.fragment),O(e,r.target,r.anchor),E()}$(d)}class D{$destroy(){F(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const{document:L}=R;function W(e){let n,o,r,s;return{c(){n=u("script"),n.src!==(o="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.worker.min.js")&&p(n,"src","https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.worker.min.js"),p(n,"crossorigin","anonymous")},m(t,o){i(t,n,o),r||(s=f(n,"load",e[8]),r=!0)},p:t,d(t){t&&l(n),r=!1,s()}}}function z(t){let e,n,r,s,g,$,b,x,j,y,w,v,_,k,C,E,A,T,N=t[5]&&t[5].length>0&&G(t),R=t[3]&&t[3].length>0&&I(t);return{c(){e=u("div"),n=a("Accuracy: (Higher is Slower) "),r=u("br"),s=d(),g=a(t[2]),$=d(),b=u("br"),x=d(),j=u("input"),y=d(),w=u("button"),w.textContent="Recognize!",v=d(),_=u("br"),k=d(),N&&N.c(),C=d(),R&&R.c(),E=a(""),p(j,"type","range"),p(j,"min","1"),p(j,"max","10")},m(o,l){i(o,e,l),c(e,n),c(e,r),c(e,s),c(e,g),c(e,$),c(e,b),c(e,x),c(e,j),m(j,t[2]),i(o,y,l),i(o,w,l),i(o,v,l),i(o,_,l),i(o,k,l),N&&N.m(o,l),i(o,C,l),R&&R.m(o,l),i(o,E,l),A||(T=[f(j,"change",t[10]),f(j,"input",t[10]),f(w,"click",t[6])],A=!0)},p(t,e){4&e&&h(g,t[2]),4&e&&m(j,t[2]),t[5]&&t[5].length>0?N?N.p(t,e):(N=G(t),N.c(),N.m(C.parentNode,C)):N&&(N.d(1),N=null),t[3]&&t[3].length>0?R?R.p(t,e):(R=I(t),R.c(),R.m(E.parentNode,E)):R&&(R.d(1),R=null)},d(t){t&&l(e),t&&l(y),t&&l(w),t&&l(v),t&&l(_),t&&l(k),N&&N.d(t),t&&l(C),R&&R.d(t),t&&l(E),A=!1,o(T)}}}function G(t){let e,n,o,r;return{c(){e=a("Page #"),n=a(t[4]),o=a(", "),r=a(t[5])},m(t,s){i(t,e,s),i(t,n,s),i(t,o,s),i(t,r,s)},p(t,e){16&e&&h(n,t[4]),32&e&&h(r,t[5])},d(t){t&&l(e),t&&l(n),t&&l(o),t&&l(r)}}}function I(t){let e,n,o,r,s,h,g;return{c(){e=a("RESULT "),n=u("br"),o=d(),r=u("div"),s=u("textarea"),p(s,"class","svelte-1a5v3u9"),p(r,"id","result"),p(r,"class","svelte-1a5v3u9")},m(l,u){i(l,e,u),i(l,n,u),i(l,o,u),i(l,r,u),c(r,s),m(s,t[3]),h||(g=f(s,"input",t[11]),h=!0)},p(t,e){8&e&&m(s,t[3])},d(t){t&&l(e),t&&l(n),t&&l(o),t&&l(r),h=!1,g()}}}function M(e){let n,r,s,a,h,m,g,$,b=e[1]&&W(e),x=e[0]&&z(e);return{c(){n=u("script"),b&&b.c(),s=u("script"),h=d(),m=u("main"),x&&x.c(),n.src!==(r="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js")&&p(n,"src","https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"),p(n,"crossorigin","anonymous"),s.src!==(a="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/2.1.4/tesseract.min.js")&&p(s,"src","https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/2.1.4/tesseract.min.js"),p(s,"integrity","sha512-He62YiiTWJ8AGZLwlCulGxr0wOMteFAIkyZuylghbNxxwACqWVNj3xUMJWxfzvRi5+oLvLu0VEEZsE2/eKastA=="),p(s,"crossorigin","anonymous"),p(m,"class","svelte-1a5v3u9")},m(t,o){c(L.head,n),b&&b.m(L.head,null),c(L.head,s),i(t,h,o),i(t,m,o),x&&x.m(m,null),g||($=[f(n,"load",e[7]),f(s,"load",e[9])],g=!0)},p(t,[e]){t[1]?b?b.p(t,e):(b=W(t),b.c(),b.m(s.parentNode,s)):b&&(b.d(1),b=null),t[0]?x?x.p(t,e):(x=z(t),x.c(),x.m(m,null)):x&&(x.d(1),x=null)},i:t,o:t,d(t){l(n),b&&b.d(t),l(s),t&&l(h),t&&l(m),x&&x.d(),g=!1,o($)}}}function H(t,e,n){let o,r,{file:s}=e,c=document.createElement("canvas"),i=2,l="",u="",a="";return t.$$set=t=>{"file"in t&&n(0,s=t.file)},[s,o,i,l,u,a,function(){if(n(3,l=""),s){let t=new FileReader;t.onload=e=>{o.getDocument(t.result).promise.then((t=>{!async function(t,e,o){for(let s=1;s<=t.numPages;s++)n(4,u=s),await t.getPage(s).then((t=>{const n=t.getViewport({scale:o,rotation:360}),r=e.getContext("2d");e.height=n.height,e.width=n.width;const s={canvasContext:r,viewport:n,dontFlip:!0};return t.render(s).promise})).then((()=>(console.log("STARTING OCR"),r.recognize(e,"eng",{logger:t=>n(5,a=t.status+" ("+Math.round(100*t.progress)+"%)")})))).then((({data:{text:t}})=>n(3,l+=t))),n(4,u=""),n(5,a=""),console.log("FINISHED OCR")}(t,c,i)}))},t.readAsArrayBuffer(s)}},()=>{n(1,o=window["pdfjs-dist/build/pdf"])},()=>{n(1,o.GlobalWorkerOptions.workerSrc=window.pdfjsWorker,o)},()=>{r=window.Tesseract},function(){var t;t=this.value,i=""===t?null:+t,n(2,i)},function(){l=this.value,n(3,l)}]}class U extends D{constructor(t){super(),S(this,t,H,M,s,{file:0})}}function V(t){let e,n,o,r,s,a,h,m,g,$,b;return m=new U({props:{file:t[0][0]}}),{c(){var t;e=u("main"),n=u("h1"),n.textContent="PDF OCR",o=d(),r=u("p"),r.textContent="Using PDF.js and Tesseract.js to Recognize Text in PDFs",s=d(),a=u("input"),h=d(),(t=m.$$.fragment)&&t.c(),p(n,"class","svelte-10teni0"),p(a,"type","file"),p(a,"accept",".pdf"),p(e,"class","svelte-10teni0")},m(l,u){i(l,e,u),c(e,n),c(e,o),c(e,r),c(e,s),c(e,a),c(e,h),O(m,e,null),g=!0,$||(b=f(a,"change",t[1]),$=!0)},p(t,[e]){const n={};1&e&&(n.file=t[0][0]),m.$set(n)},i(t){g||(N(m.$$.fragment,t),g=!0)},o(t){!function(t,e,n,o){if(t&&t.o){if(T.has(t))return;T.add(t),(void 0).c.push((()=>{T.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}(m.$$.fragment,t),g=!1},d(t){t&&l(e),F(m),$=!1,b()}}}function Z(t,e,n){let o=[];return[o,function(){o=this.files,n(0,o)}]}return new class extends D{constructor(t){super(),S(this,t,Z,V,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
